<div class="printers">
  <div class="container">
    <div class="printers__in">

      <div class="printers__filters">
        <form
          [formGroup]="formFilters"
          (ngSubmit)="getTable($event)"
          class="filters">

          <app-select-search
            placeholder="Клієнт"
            controlName="client"
            [disabled]="clientsIsReady"
            [formGroup]="formFilters"
            [options]="clients"
            (change)="onChangeClients($event)"
          ></app-select-search>

          <app-select-search
            placeholder="Місто"
            controlName="location"
            [disabled]="locationsIsReady"
            [formGroup]="formFilters"
            [options]="locations"
            (change)="onChangeLocations($event)"
          ></app-select-search>

          <app-select-search
            placeholder="Відділ"
            controlName="department"
            [disabled]="departmentsIsReady"
            [formGroup]="formFilters"
            [options]="departments"
            (change)="onChangeDepartments($event)"
          ></app-select-search>

          <app-select-search
            placeholder="Принтери"
            controlName="printers"
            [disabled]="printersIsReady"
            [formGroup]="formFilters"
            [options]="printers"
          ></app-select-search>

          <mat-form-field appearance="fill">
            <mat-label>Введіть діапазон дат</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
              <input matStartDate formControlName="start" placeholder="Початок">
              <input matEndDate formControlName="end" placeholder="Кiнець">
            </mat-date-range-input>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>

            <mat-error *ngIf="range.controls.start.hasError('matStartDateInvalid')">Недійсна дата початку</mat-error>
            <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')">Недійсна дата завершення</mat-error>
          </mat-form-field>


          <div class="filters__btn">
            <button
              type="submit"
              [disabled]="formFilters.invalid || formFilters.disabled"
              mat-raised-button
              color="primary"
            >
              Знайти
            </button>
          </div>
        </form>
      </div>


      <ng-container *ngIf="gridService.isReadyTable">

        <ag-grid-angular
          style="width: 100%; height: 400px;"
          class="ag-theme-alpine"
          [gridOptions]="gridService.gridOptions"
          [modules]="modules"
        >
        </ag-grid-angular>

        <div class="printers__btns">
          <button
            class="printers__btn"
            type="button"
            mat-raised-button
            color="primary"
            (click)="onBtnExportCSV()"
          >
            Завантажити CSV файл
          </button>

          <button
            class="printers__btn"
            type="button"
            mat-raised-button
            color="primary"
            (click)="onBtnExportExcle()"
          >
            Завантажити Excle файл
          </button>

          <button
            class="printers__btn"
            type="button"
            mat-raised-button
            (click)="getAllRows()"
          >
            Зберегти
          </button>
        </div>

      </ng-container>

    </div>

  </div>
</div>
